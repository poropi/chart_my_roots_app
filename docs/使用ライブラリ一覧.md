# 使用ライブラリ一覧

## 1. はじめに

このドキュメントは、家系図アプリ「ChartMyRoots」の開発に使用される主要なFlutter/Dartライブラリ（パッケージ）とその目的をまとめたものです。各ライブラリの選定理由やプロジェクトにおける役割についても簡単に説明します。

## 2. 主要フレームワーク・SDK

### Flutter SDK
- **説明**: Googleによって開発されたUIツールキット。単一のコードベースからモバイル（iOS、Android）、Web、デスクトップ（Windows、macOS、Linux）向けのネイティブコンパイルされたアプリケーションを構築できます。
- **役割**: アプリケーション全体の基盤となり、UI構築、状態管理、プラットフォーム連携など、開発のあらゆる側面で使用されます。

### Dart SDK
- **説明**: Flutterで使用されるプログラミング言語。クライアント最適化されており、高速な開発サイクルと高性能な実行ファイルを実現します。
- **役割**: アプリケーションのロジック記述、非同期処理、クラス定義など、すべてのコードをDartで記述します。

## 3. 状態管理

### `riverpod` / `flutter_riverpod`
- **説明**: Flutterアプリケーション向けのリアクティブキャッシュおよびデータバインディングフレームワーク。シンプルかつ強力な状態管理ソリューションを提供し、コンパイルセーフな依存性注入を実現します。
- **役割**: アプリケーション全体の状態（ユーザー認証状態、選択中の人物、家系図データ、UIテーマなど）を一元的に管理し、ウィジェットが必要なデータに効率的にアクセスできるようにします。

## 4. データモデルとシリアライズ

### `freezed` / `freezed_annotation`
- **説明**: イミュータブル（不変）なデータクラスやユニオン型を簡単に生成するためのコードジェネレータ。`copyWith`、`toString`、`==`演算子、`hashCode`などのボイラープレートコードを自動生成します。
- **役割**: `Person`、`Relationship`、`FamilyTreeData`などのデータモデルクラスを堅牢かつ安全に定義するために使用します。

### `json_serializable` / `build_runner`
- **説明**: DartオブジェクトとJSON間のシリアライズ/デシリアライズコードを自動生成するライブラリ。`freezed`と組み合わせて使用されることが多いです。
- **役割**: Firestoreとのデータ連携や、JSON形式でのデータエクスポート・インポート機能の実装に不可欠です。

## 5. 永続化・バックエンド (Firebase)

### `firebase_core`
- **説明**: FlutterアプリケーションでFirebaseサービスを利用するための初期化とコア機能を提供します。
- **役割**: FirestoreやFirebaseAuthなど、他のFirebase SDKを利用するための前提となります。

### `cloud_firestore`
- **説明**: Firebaseが提供するNoSQLドキュメントデータベース。リアルタイム同期、オフラインサポート、スケーラビリティなどの特徴を持ちます。
- **役割**: 家系図データ（人物情報、関係性情報など）の主要な永続化ストレージとして使用されます。

### `firebase_auth`
- **説明**: Firebaseが提供する認証サービス。メール/パスワード、各種ソーシャルログイン、匿名認証などをサポートします。
- **役割**: 本アプリでは主に匿名認証を利用し、ユーザーごとのデータをFirestoreに保存するためのユーザー識別子（UID）を取得します。

## 6. ルーティング

### `go_router`
- **説明**: Flutterアプリケーション向けの宣言的なルーティングパッケージ。URLベースのナビゲーション、ディープリンク、リダイレクトなどをサポートします。
- **役割**: アプリケーション内の画面遷移を管理します。本アプリはシングルページに近い構成ですが、将来的な機能拡張（設定画面など）を見据えて導入します。

## 7. UI・ユーティリティ

### `intl`
- **説明**: 国際化（i18n）と地域化（l10n）のためのライブラリ。日付、数値、メッセージのフォーマットと翻訳機能を提供します。
- **役割**: 主に日付の表示フォーマット（例: `yyyy年MM月dd日`）に使用します。将来的には多言語対応の基盤となります。

### `connectivity_plus`
- **説明**: デバイスのネットワーク接続状態（オンライン/オフライン、WiFi/モバイルデータなど）を監視するプラグイン。
- **役割**: オフライン時のデータ処理や、オンライン復帰時の自動同期トリガーなど、ネットワーク状態に応じた動作を実現するために使用します。

### `path_provider`
- **説明**: デバイスのファイルシステム上の共通の場所（一時ディレクトリ、ドキュメントディレクトリなど）へのパスを取得するプラグイン。
- **役割**: モバイル/デスクトップ環境で、エクスポートされたJSONファイルや生成されたPDFファイルを一時的に保存する際に使用します。

### `share_plus`
- **説明**: OSの共有機能を呼び出し、ファイルやテキストを他のアプリと共有するためのプラグイン。
- **役割**: モバイル/デスクトップ環境で、生成されたPDFファイルやエクスポートされたJSONファイルをユーザーが他のアプリ（メール、メッセージなど）で共有できるようにします。

### `pdf`
- **説明**: DartでPDFドキュメントを生成するためのライブラリ。テキスト、画像、図形描画など、豊富なPDF作成機能を提供します。
- **役割**: 家系図データを視覚的なPDFドキュメントとして生成するコアロジックで使用されます。

### `printing`
- **説明**: FlutterアプリケーションでPDFのプレビュー表示と印刷機能を提供するライブラリ。`pdf`パッケージと連携して動作します。
- **役割**: 生成されたPDFをアプリ内でプレビュー表示したり、OSの印刷機能を呼び出したりするために使用します。

### `universal_html` (または `dart:html`)
- **説明**: Webプラットフォームでのみ利用可能なHTML、DOM、Window APIへのアクセスを提供します。
- **役割**: Web環境でJSONファイルやPDFファイルをダウンロードさせるために、`Blob`や`AnchorElement`などのHTML機能を利用する際に使用します。

## 8. 開発・テスト・ビルドツール

### `flutter_lints`
- **説明**: Flutterプロジェクト向けの推奨リントルールのセット。コードの品質と一貫性を保つのに役立ちます。
- **役割**: `analysis_options.yaml`で有効化し、静的解析によって潜在的な問題を検出し、コーディングスタイルを統一します。

### `flutter_launcher_icons`
- **説明**: アプリケーションのランチャーアイコン（アプリアイコン）を各プラットフォーム向けに自動生成するツール。
- **役割**: 提供されたアイコン画像から、Android、iOS、Webなどのプラットフォームに適したサイズと形式のアイコンを生成します。

### `mockito` / `mocktail`
- **説明**: Dart/Flutterのユニットテストやウィジェットテストで使用されるモックライブラリ。依存オブジェクトを偽のオブジェクト（モック）に置き換えてテストを容易にします。
- **役割**: リポジトリやサービスクラスなどの外部依存をモック化し、テスト対象のクラスやウィジェットを独立してテストするために使用します。

### `integration_test`
- **説明**: Flutterアプリケーションの統合テスト（UIテスト、エンドツーエンドテスト）を記述・実行するためのフレームワーク。
- **役割**: アプリ全体の動作や複数のコンポーネントが連携するシナリオをテストし、品質を保証します。

### `build_runner`
- **説明**: Dartのコードジェネレーションを実行するためのツール。`freezed`や`json_serializable`などのコードジェネレータと連携して動作します。
- **役割**: データモデルクラスやJSONシリアライズコードの自動生成に必須です。

## 9. その他

### `uuid` (検討・オプション)
- **説明**: UUID (Universally Unique Identifier) を生成するためのライブラリ。
- **役割**: FirestoreがドキュメントIDを自動生成するため必須ではありませんが、クライアントサイドで一意なIDを事前に生成したい場合に利用を検討できます。

この一覧はプロジェクトの進行に応じて更新される可能性があります。
